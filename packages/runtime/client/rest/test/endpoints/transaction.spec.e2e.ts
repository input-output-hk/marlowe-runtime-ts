import { expect, test } from "vitest";
import { isRight } from "fp-ts/lib/Either.js";
import { ApplyInputsToContractResponsePayload } from "@marlowe.io/runtime-rest-client/contract";

test("TransactionTextEnvelope decoding", () => {
 expect(isRight(ApplyInputsToContractResponsePayload.decode(response1))).toBeTruthy();
 expect(isRight(ApplyInputsToContractResponsePayload.decode(response2))).toBeTruthy();
});

const response1 = {
  "links": {
    "transaction": "contracts/a17978ab206ccebe5e927a7b9861561101ce05d31c78173847997d605d63dce6%231/transactions/c73a8c98a55c5da77ca0bca652c48c1cd673ee0f310d12d4d0b21e4daba4c1cd"
  },
  "resource": {
    "contractId": "a17978ab206ccebe5e927a7b9861561101ce05d31c78173847997d605d63dce6#1",
    "safetyErrors": [],
    "transactionId": "c73a8c98a55c5da77ca0bca652c48c1cd673ee0f310d12d4d0b21e4daba4c1cd",
    "tx": {
      "cborHex": "84ab00d9010282825820a17978ab206ccebe5e927a7b9861561101ce05d31c78173847997d605d63dce600825820a17978ab206ccebe5e927a7b9861561101ce05d31c78173847997d605d63dce6010dd9010281825820014d173b7ce13dc2dea2c5d6b58c05514ac7bbc8c5bb3925970310a84ad4467a0312d90102818258209679fc6b0bb0d3d5e1fb09a4be589707553caefe6028bd726c8421066ec6bff7010182825839000d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ce6735a5bdd99f4bb40918a9fb0c6ee5bb10f505c5e1c750a6343ba8571a007b53cb825839000d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ce6735a5bdd99f4bb40918a9fb0c6ee5bb10f505c5e1c750a6343ba8571a00110c6a10825839000d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ce6735a5bdd99f4bb40918a9fb0c6ee5bb10f505c5e1c750a6343ba8571a003e8eb3111a000dbc8d021a0009285e031a04d8937f081a04d45a6e0ed9010281581c0d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ce0b5820c45a3e3e9537f5f3aca42e0c23dafd1521e84933b5abf099ea0059a459732d78a204d9010281d8799fd8799f40ffd8799fa1d8799fd8799fd87980d8799fd8799f581c0d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ceffd8799fd8799fd8799f581c6735a5bdd99f4bb40918a9fb0c6ee5bb10f505c5e1c750a6343ba857ffffffffffd8799f4040ffff1a00110882a0a000ffd87c9f9fd8799fd8799fd8799fd87980d8799fd8799f581c0d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ceffd8799fd8799fd8799f581c6735a5bdd99f4bb40918a9fb0c6ee5bb10f505c5e1c750a6343ba857ffffffffffd8799fd87980d8799fd8799f581c0d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ceffd8799fd8799fd8799f581c6735a5bdd99f4bb40918a9fb0c6ee5bb10f505c5e1c750a6343ba857ffffffffffd8799f4040ffd87a9f1903e8ffffd87980ffff1b000008dadb7b6741d87980ffff05a1820001829fd8799fd8799fd8799fd87980d8799fd8799f581c0d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ceffd8799fd8799fd8799f581c6735a5bdd99f4bb40918a9fb0c6ee5bb10f505c5e1c750a6343ba857ffffffffffd8799fd87980d8799fd8799f581c0d393ee5d56e82ef9a661d81d09fdf7ca98ef184053e5e47ae0ef0ceffd8799fd8799fd8799f581c6735a5bdd99f4bb40918a9fb0c6ee5bb10f505c5e1c750a6343ba857ffffffffffd8799f4040ff1903e8ffffff821a002ca8fd1a231e3fedf5f6",
      "description": "",
      "type": "Tx ConwayEra"
    }
  }
};

const response2 = {
 "links": {
   "transaction": "contracts/3df8ab01895ee9162758cf2f1fa24de28510151e83f48ea68ac675c1abdb8bec%231/transactions/6494baf09acf7087c8f1c9ec3866311ca226f64b4e127ae027735e9687b3dbef"
 },
 "resource": {
   "contractId": "3df8ab01895ee9162758cf2f1fa24de28510151e83f48ea68ac675c1abdb8bec#1",
   "safetyErrors": [],
   "transactionId": "6494baf09acf7087c8f1c9ec3866311ca226f64b4e127ae027735e9687b3dbef",
   "tx": {
     "cborHex": "84ab00d90102828258203df8ab01895ee9162758cf2f1fa24de28510151e83f48ea68ac675c1abdb8bec008258203df8ab01895ee9162758cf2f1fa24de28510151e83f48ea68ac675c1abdb8bec010dd90102818258203df8ab01895ee9162758cf2f1fa24de28510151e83f48ea68ac675c1abdb8bec0012d90102818258209679fc6b0bb0d3d5e1fb09a4be589707553caefe6028bd726c8421066ec6bff701018282583900c3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc603655cae3fded6aba0ca458eea309fbe8734c46cb836cc1464551fe691a007b53cb82583900c3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc603655cae3fded6aba0ca458eea309fbe8734c46cb836cc1464551fe691a00110c6a1082583900c3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc603655cae3fded6aba0ca458eea309fbe8734c46cb836cc1464551fe691a0076c384111a000dbc8d021a0009285e031a04d8937f081a04d40a9e0ed9010281581cc3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc600b58207bc8a2a177dd87ea111252d5e363b274f90218f9fce6c455a3804673baf073d0a204d9010281d8799fd8799f40ffd8799fa1d8799fd8799fd87980d8799fd8799f581cc3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc60ffd8799fd8799fd8799f581c3655cae3fded6aba0ca458eea309fbe8734c46cb836cc1464551fe69ffffffffffd8799f4040ffff1a00110882a0a000ffd87c9f9fd8799fd8799fd8799fd87980d8799fd8799f581cc3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc60ffd8799fd8799fd8799f581c3655cae3fded6aba0ca458eea309fbe8734c46cb836cc1464551fe69ffffffffffd8799fd87980d8799fd8799f581cc3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc60ffd8799fd8799fd8799f581c3655cae3fded6aba0ca458eea309fbe8734c46cb836cc1464551fe69ffffffffffd8799f4040ffd87a9f1903e8ffffd87980ffff1b000008dadb7b6741d87980ffff05a1820001829fd8799fd8799fd8799fd87980d8799fd8799f581cc3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc60ffd8799fd8799fd8799f581c3655cae3fded6aba0ca458eea309fbe8734c46cb836cc1464551fe69ffffffffffd8799fd87980d8799fd8799f581cc3feed3556ce552086307e118c10dd8ecf9a6f27d946c8a1ad46dc60ffd8799fd8799fd8799f581c3655cae3fded6aba0ca458eea309fbe8734c46cb836cc1464551fe69ffffffffffd8799f4040ff1903e8ffffff821a002ca8fd1a231e3fedf5f6",
     "description": "",
     "type": "Tx ConwayEra"
   }
 }
};
